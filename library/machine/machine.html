

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>machine — Functions to control mcu peripherals &mdash; MicroPython for Thunderboard Sense 1.8.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/customstyle.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="MicroPython for Thunderboard Sense 1.8.2 documentation" href="../../index.html"/>
        <link rel="up" title="MicroPython libraries" href="../index.html"/>
        <link rel="next" title="Class I2C – a two-wire serial protocol" href="machine.I2C.html"/>
        <link rel="prev" title="gc – control the garbage collector" href="../micropython/gc.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> MicroPython for Thunderboard Sense
          

          
          </a>

          
            
            
              <div class="version">
                1.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickref.html">Quick reference for the Thunderboard Sense Micropython Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general.html">General information about the Thunderboard Sense</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Get started with MicroPython</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#libraries-specific-to-the-thunderboard-sense">Libraries specific to the Thunderboard Sense</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">machine</span></code> &#8212; Functions to control mcu peripherals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reset-related-functions">Reset related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interrupt-related-functions">Interrupt related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-related-functions">Power related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous-functions">Miscellaneous functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constants">Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../em/em.html"><code class="docutils literal"><span class="pre">em</span></code> &#8212; Functions related to low power modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tbsense/tbsense.html"><code class="docutils literal"><span class="pre">tbsense</span></code> &#8212; Functions related to the board</a></li>
<li class="toctree-l3"><a class="reference internal" href="../radio/radio.html"><code class="docutils literal"><span class="pre">radio</span></code> &#8212; Functions and classes related to radio operation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">The MicroPython language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">MicroPython license information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../contents.html">MicroPython Documentation contents</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../quickref.html">Quick reference for the Thunderboard Sense Micropython Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general.html">General information about the Thunderboard Sense</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/index.html">Get started with MicroPython</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#libraries-specific-to-the-thunderboard-sense">Libraries specific to the Thunderboard Sense</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">machine</span></code> &#8212; Functions to control mcu peripherals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../em/em.html"><code class="docutils literal"><span class="pre">em</span></code> &#8212; Functions related to low power modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tbsense/tbsense.html"><code class="docutils literal"><span class="pre">tbsense</span></code> &#8212; Functions related to the board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../radio/radio.html"><code class="docutils literal"><span class="pre">radio</span></code> &#8212; Functions and classes related to radio operation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/index.html">The MicroPython language</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">MicroPython for Thunderboard Sense</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">MicroPython libraries</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">machine</span></code> &#8212; Functions to control mcu peripherals</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/library/machine/machine.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-machine">
<span id="machine-functions-to-control-mcu-peripherals"></span><h1><a class="reference internal" href="../micropython/machine.html#module-machine" title="machine: functions related to the board"><code class="xref py py-mod docutils literal"><span class="pre">machine</span></code></a> &#8212; Functions to control mcu peripherals<a class="headerlink" href="#module-machine" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">machine</span></code> module contains specific functions and classes
related to the microcontroller on the board. Most functions
in this module allow direct and unrestricted access to and
control of hardware peripherals on the microcontroller (such as
CPU, timers, buses, etc.). If used incorrectly, this can lead to
malfunction, lockups, crashes of your board, and in extreme cases,
hardware damage.</p>
<p id="machine-callbacks">A small note on the callbacks used by functions and class methods of
the <code class="docutils literal"><span class="pre">machine</span></code> module: all these callbacks should be considered
as executing in an interrupt context. This is true both for physical
devices with IDs &gt;= 0 as well as &#8220;virtual&#8221; devices with negative IDs
like -1. See <a class="reference internal" href="../../reference/isr_rules.html#isr-rules"><span class="std std-ref">Writing interrupt handlers</span></a>.</p>
<div class="section" id="reset-related-functions">
<h2>Reset related functions<a class="headerlink" href="#reset-related-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="machine.reset">
<code class="descclassname">machine.</code><code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the device in a manner similar to pushing the external
RESET button.</p>
</dd></dl>

<dl class="function">
<dt id="machine.reset_cause">
<code class="descclassname">machine.</code><code class="descname">reset_cause</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.reset_cause" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the reset cause. See <a class="reference internal" href="../micropython/machine.html#machine-constants"><span class="std std-ref">constants</span></a>
for possible return values.</p>
</dd></dl>

</div>
<div class="section" id="interrupt-related-functions">
<h2>Interrupt related functions<a class="headerlink" href="#interrupt-related-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="machine.disable_irq">
<code class="descclassname">machine.</code><code class="descname">disable_irq</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.disable_irq" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable interrupt requests.
Returns the previous IRQ state, which should be considered an
opaque value. This return value should be passed to the
<code class="docutils literal"><span class="pre">enable_irq</span></code> function in order to restore interrupts to the
original state, from before <code class="docutils literal"><span class="pre">disable_irq</span></code> was called.</p>
</dd></dl>

<dl class="function">
<dt id="machine.enable_irq">
<code class="descclassname">machine.</code><code class="descname">enable_irq</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#machine.enable_irq" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-enable interrupt requests.
The <code class="docutils literal"><span class="pre">state</span></code> parameter should be the value that was returned from
the most recent call to the <code class="docutils literal"><span class="pre">disable_irq</span></code> function.</p>
</dd></dl>

</div>
<div class="section" id="power-related-functions">
<h2>Power related functions<a class="headerlink" href="#power-related-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="machine.freq">
<code class="descclassname">machine.</code><code class="descname">freq</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.freq" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the CPU frequency in hertz.</p>
</dd></dl>

<dl class="function">
<dt id="machine.idle">
<code class="descclassname">machine.</code><code class="descname">idle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.idle" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns of the clock to the CPU, which is useful to reduce power consumption
during long or short periods. Peripherals continue working, and execution
resumes as soon as any interrupt is triggered. This includes the system
timer interrupt, which is triggered every millisecond. This mode
equals entering EM1-mode.</p>
</dd></dl>

<dl class="function">
<dt id="machine.sleep">
<code class="descclassname">machine.</code><code class="descname">sleep</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the CPU and disables most peripherals. Execution resumes from the
point where sleep was requested. For wake up to happen, wake sources
should be configured first. This mode equals entering EM3-mode.</p>
</dd></dl>

<dl class="function">
<dt id="machine.deepsleep">
<code class="descclassname">machine.</code><code class="descname">deepsleep</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.deepsleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the CPU and all peripherals. Waking up works similar to a reset.
The reset cause can be checked with the <code class="docutils literal"><span class="pre">reset_cause</span></code> function to verify
that we are coming from <code class="docutils literal"><span class="pre">machine.DEEPSLEEP</span></code>. For wakeup to actually happen,
wake sources should be configured first, like <code class="docutils literal"><span class="pre">Pin</span></code> change or <code class="docutils literal"><span class="pre">RTC</span></code> timeout.</p>
</dd></dl>

</div>
<div class="section" id="miscellaneous-functions">
<h2>Miscellaneous functions<a class="headerlink" href="#miscellaneous-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="machine.unique_id">
<code class="descclassname">machine.</code><code class="descname">unique_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.unique_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a byte string with a unique identifier of a board/SoC, and will be
different from one board/SoC to another. Length varies by hardware.</p>
</dd></dl>

<dl class="function">
<dt id="machine.time_pulse_us">
<code class="descclassname">machine.</code><code class="descname">time_pulse_us</code><span class="sig-paren">(</span><em>pin</em>, <em>pulse_level</em>, <em>timeout_us=1000000</em><span class="sig-paren">)</span><a class="headerlink" href="#machine.time_pulse_us" title="Permalink to this definition">¶</a></dt>
<dd><p>Time a pulse on the given <a class="reference internal" href="machine.Pin.html#machine.Pin.pin" title="machine.Pin.pin"><code class="xref any py py-meth docutils literal"><span class="pre">pin</span></code></a>, and return the duration of the pulse
in microseconds. The <code class="xref any docutils literal"><span class="pre">pulse_level</span></code> argument should be 0 to time a low pulse,
or 1 to time a high pulse.</p>
<p>If the current input value of the pin is different to <code class="xref any docutils literal"><span class="pre">pulse_level</span></code>, the function
first (*) waits until the pin input becomes equal to <code class="xref any docutils literal"><span class="pre">pulse_level</span></code>, then (**) times
the duration that the pin is equal to <code class="xref any docutils literal"><span class="pre">pulse_level</span></code>. If the pin is already equal to
<a href="#id1"><span class="problematic" id="id2">`</span></a>pulse_level`the timing starts right away.</p>
<p>The function will return -2 if there was a timeout waiting for the condition marked (*)
above, and -1 if there was a timeout during the main measurement, marked (**) above.
The timeout is the same for both cases and given by <a href="#id3"><span class="problematic" id="id4">`</span></a>timeout_us (which is in microseconds).
Otherwise the return value is the timed pulse in microseconds.</p>
</dd></dl>

</div>
<div class="section" id="constants">
<span id="machine-constants"></span><h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="machine.machine.PWR_ON_RESET">
<code class="descclassname">machine.</code><code class="descname">PWR_ON_RESET</code><a class="headerlink" href="#machine.machine.PWR_ON_RESET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="machine.machine.HARD_RESET">
<code class="descclassname">machine.</code><code class="descname">HARD_RESET</code><a class="headerlink" href="#machine.machine.HARD_RESET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="machine.machine.SOFT_RESET">
<code class="descclassname">machine.</code><code class="descname">SOFT_RESET</code><a class="headerlink" href="#machine.machine.SOFT_RESET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="machine.machine.WDT_RESET">
<code class="descclassname">machine.</code><code class="descname">WDT_RESET</code><a class="headerlink" href="#machine.machine.WDT_RESET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="machine.machine.DEEPSLEEP_RESET">
<code class="descclassname">machine.</code><code class="descname">DEEPSLEEP_RESET</code><a class="headerlink" href="#machine.machine.DEEPSLEEP_RESET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="machine.I2C.html">Class I2C &#8211; a two-wire serial protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.Pin.html">Class Pin - control I/O pins</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.SPI.html">Class SPI &#8211; Serial Peripheral Interface bus control (master)</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.Timer.html">class Timer &#8212; control hardware timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.Timer.html#class-timerchannel-setup-a-channel-for-a-timer">class TimerChannel &#8212; setup a channel for a timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.IRQ.html">Class IRQ &#8211; Handle interrupt requests</a></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="machine.I2C.html" class="btn btn-neutral float-right" title="Class I2C – a two-wire serial protocol" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../micropython/gc.html" class="btn btn-neutral" title="gc – control the garbage collector" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Damien P. George, Paul Sokolovsky, Thomas F. Koren..
      Last updated on 28 Mar 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.8.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>